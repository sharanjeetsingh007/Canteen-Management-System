(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[11],{629:function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"j",(function(){return c})),n.d(t,"i",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"h",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"k",(function(){return j}));var r=function(){var e=sessionStorage.getItem("user");return e?JSON.parse(e):null},c=function(e,t){sessionStorage.setItem("token",e),sessionStorage.setItem("user",JSON.stringify(t))},s=function(e){var t=[];JSON.parse(sessionStorage.getItem("_products")||"[]").forEach((function(n,r){n.pid!==e?t.push(n):n.count>1&&(n.count--,n.total=n.price*n.count,t.push(n))})),sessionStorage.setItem("_products",JSON.stringify(t))},a=function(){var e=[];return JSON.parse(sessionStorage.getItem("_products")||"[]").forEach((function(t,n){e.push(t.name+" $"+t.price+" x "+t.count+" = $"+t.total)})),e},i=function(e,t,n,r){var c=JSON.parse(sessionStorage.getItem("_products")||"[]"),s=!1;if(c.forEach((function(t,n){t.pid===e&&(s=!0,t.count++,t.total=t.price*t.count)})),!s){var a={pid:e,name:t,price:n,imgurl:r,total:1*n,count:1};c.push(a)}sessionStorage.setItem("_products",JSON.stringify(c))},o=function(){return JSON.parse(sessionStorage.getItem("_products")||"[]")},u=function(){sessionStorage.setItem("_products",JSON.stringify([]))},l=function(){var e=JSON.parse(sessionStorage.getItem("_products")||"[]"),t=0;return e.forEach((function(e,n){t+=e.count})),t},d=function(){var e=JSON.parse(sessionStorage.getItem("_products")||"[]"),t=0;return e.forEach((function(e,n){t+=e.count*e.price})),t};function p(e,t,n){return new Promise((function(n,r){e().then(n).catch((function(c){setTimeout((function(){1!==t?p(e,t-1).then(n,r):r(c)}),5e3)}))}))}var j=function(e,t){var n="",r=!0;("name"!==e||t||(r=!1,n="Please enter your name."),"email"!==e||t||(r=!1,n="Please enter your email Address."),"email"===e&&"undefined"!==typeof t)&&(new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i).test(t)||(r=!1,n="Please enter valid email address."));("phone"!==e||t||(r=!1,n="Please enter your phone number."),"phone"===e&&"undefined"!==typeof t)&&(new RegExp(/^\+[0-9\b]+$/).test(t)?t.length<10&&(r=!1,n="Please enter valid phone number."):(r=!1,n="Please enter only number."));return[r,n]}},630:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return p}));var r=n(642),c=n.n(r),s=n(43),a=n(643),i=n(644),o=(n(646),n(649),i.a.initializeApp({apiKey:"AIzaSyCtv0SrPL04mrat1QIvWI8Q4e7yGoWgt1s",authDomain:"ict342-user.firebaseapp.com",databaseURL:"https://ict342-user-default-rtdb.firebaseio.com",projectId:"ict342-user",storageBucket:"ict342-user.appspot.com",messagingSenderId:"71121181583",appId:"1:71121181583:web:475e97730cdd78962189fa"}),i.a.auth),u=i.a.auth(),l=i.a.firestore(),d=function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,l.doc("users/".concat(t)).get();case 5:return n=e.sent,e.abrupt("return",Object(s.a)({uid:t},n.data()));case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching user",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(a.a)(c.a.mark((function e(t,n,r){var s,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return s=l.doc("users/".concat(t.uid)),e.next=5,s.get();case 5:if(e.sent.exists){e.next=18;break}return"","",a=t.email,e.prev=10,e.next=13,s.set({email:a,displayName:n,phoneNumber:r,rule:"",photoUrl:""});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.error("Error creating user document",e.t0);case 18:return e.abrupt("return",d(t.uid));case 19:case"end":return e.stop()}}),e,null,[[10,15]])})));return function(t,n,r){return e.apply(this,arguments)}}()},680:function(e,t,n){"use strict";n.r(t);var r=n(164),c=n(1),s=n(159),a=n(627),i=n(20),o=n(628),u=n(630),l=n(629),d=n(17);t.default=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],p=t[1],j=Object(c.useState)(""),f=Object(r.a)(j,2),m=f[0],h=f[1],b=Object(c.useState)(null),O=Object(r.a)(b,2),x=O[0],g=O[1],v=Object(c.useState)(!1),S=Object(r.a)(v,2),w=S[0],y=S[1],N=function(e){var t=e.currentTarget,n=t.name,r=t.value;"userEmail"===n?p(r):"userPassword"===n&&h(r)};if(w){var I=Object(l.g)();return console.log(I),"admin"!==I.rule?Object(d.jsx)(i.a,{to:"/today-menu"}):Object(d.jsx)(i.a,{to:"/"})}return Object(d.jsx)("div",{className:"c-app c-default-layout flex-row align-items-center",children:Object(d.jsx)(a.m,{children:Object(d.jsx)(a.Q,{className:"justify-content-center",children:Object(d.jsx)(a.l,{md:"8",children:Object(d.jsxs)(a.j,{children:[Object(d.jsx)(a.g,{className:"p-4",children:Object(d.jsx)(a.h,{children:Object(d.jsxs)(a.v,{children:[Object(d.jsx)("h1",{children:"Login"}),Object(d.jsx)("p",{className:"text-muted",children:"Sign In to your account"}),Object(d.jsxs)(a.B,{className:"mb-3",children:[Object(d.jsx)(a.D,{children:Object(d.jsx)(a.E,{children:Object(d.jsx)(o.a,{name:"cil-user"})})}),Object(d.jsx)(a.A,{type:"email",placeholder:"User Email",name:"userEmail",autoComplete:"userEmail",onChange:function(e){N(e)}})]}),Object(d.jsxs)(a.B,{className:"mb-4",children:[Object(d.jsx)(a.D,{children:Object(d.jsx)(a.E,{children:Object(d.jsx)(o.a,{name:"cil-lock-locked"})})}),Object(d.jsx)(a.A,{type:"password",placeholder:"Password",name:"userPassword",autoComplete:"userPassword",onChange:function(e){N(e)}})]}),Object(d.jsxs)(a.Q,{children:[Object(d.jsx)(a.l,{xs:"6",children:Object(d.jsx)(a.d,{color:"primary",className:"px-4",onClick:function(e){!function(e,t,n){e.preventDefault(),g(null),y(!1),u.a.signInWithEmailAndPassword(t,n).then((function(e){Object(u.e)(e.user.uid).then((function(t){Object(l.j)(e.user.refreshToken,t),y(!0)})).catch((function(e){y(!1),g(e.message)}))})).catch((function(e){y(!1),g(e.message)}))}(e,n,m)},children:"Login"})}),Object(d.jsx)(a.l,{xs:"6",className:"text-right",children:Object(d.jsx)(a.d,{color:"link",className:"px-0",children:"Forgot password?"})})]}),x&&Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(a.Q,{children:Object(d.jsx)("small",{style:{color:"red"},children:x})})})]})})}),Object(d.jsx)(a.g,{className:"text-white bg-primary py-5 d-md-down-none",style:{width:"44%"},children:Object(d.jsx)(a.h,{className:"text-center",children:Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Sign up"}),Object(d.jsx)("p",{children:"Please sing up if you have not an account."}),Object(d.jsx)(s.b,{to:"/register",children:Object(d.jsx)(a.d,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,children:"Register Now!"})})]})})})]})})})})})}}}]);
//# sourceMappingURL=11.b6b4e298.chunk.js.map