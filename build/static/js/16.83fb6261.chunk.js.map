{"version":3,"sources":["services/wallets.service.js","views/admin/UserWallets.js"],"names":["db","firestore","collection","WalletsDataService","item","add","id","value","doc","update","delete","uid","this","getAll","where","get","UserWallets","props","onDataChange","bind","state","wallets","user","getUser","unsubscribe","undefined","onSnapshot","items","forEach","data","push","username","total","payment","setState","fields","key","_classes","hover","striped","clickableRows","scopedSlots","to","Component"],"mappings":"mMAEMA,E,OAAKC,EAAUC,WAAW,YAC1BC,E,sFACF,WACI,OAAOH,I,oBAGX,SAAOI,GACH,OAAOJ,EAAGK,IAAID,K,oBAGlB,SAAOE,EAAIC,GACP,OAAOP,EAAGQ,IAAIF,GAAIG,OAAOF,K,oBAG7B,SAAOD,GACH,OAAON,EAAGQ,IAAIF,GAAII,W,yBAGtB,SAAYC,GACR,OAAOC,KAAKC,SAASC,MAAM,MAAO,KAAMH,GAAKI,U,KAItC,QAAIZ,G,oJCXba,E,kDAEF,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IACDC,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKC,MAAQ,CACTC,QAAS,GACTC,KAAMC,eAGV,EAAKC,iBAAcC,EARJ,E,qDAWnB,WACIb,KAAKY,YAAcrB,IAAmBU,SACjCa,WAAWd,KAAKM,gB,kCAGzB,WACIN,KAAKY,gB,0BAGT,SAAaG,GAAQ,IAAD,OACZN,EAAU,GACdM,EAAMC,SAAQ,SAAAxB,GACV,IAAIE,EAAKF,EAAKE,GACVuB,EAAOzB,EAAKyB,OAEZA,EAAKlB,MAAQ,EAAKS,MAAME,KAAKX,KAE7BU,EAAQS,KAAK,CACTxB,GAAIA,EACJK,IAAKkB,EAAKlB,IACVoB,SAAUF,EAAKE,SACfC,MAAOH,EAAKG,MACZC,QAASJ,EAAKI,aAK1BrB,KAAKsB,SAAS,CACVb,QAASA,M,oBAIjB,WAGI,OADaE,cAOT,eAAC,IAAD,WACI,cAAC,IAAD,yBAGA,cAAC,IAAD,UACI,cAAC,IAAD,CACII,MAAOf,KAAKQ,MAAMC,QAClBc,OAAQ,CACJ,CAAEC,IAAK,QAASC,SAAU,oBAC1B,WAEJC,OAAK,EACLC,SAAO,EACPC,eAAa,EACbC,YAAe,CACX,MACI,SAACrC,GAAD,OACI,mCAAMA,EAAK4B,kBArB3B,cAAC,IAAD,CAAUU,GAAG,e,GAlDPC,aAiFX3B","file":"static/js/16.83fb6261.chunk.js","sourcesContent":["import { firestore } from \"../firebase\";\r\n\r\nconst db = firestore.collection(\"/wallets\");\r\nclass WalletsDataService {\r\n    getAll() {\r\n        return db;\r\n    }\r\n\r\n    create(item) {\r\n        return db.add(item);\r\n    }\r\n\r\n    update(id, value) {\r\n        return db.doc(id).update(value);\r\n    }\r\n\r\n    delete(id) {\r\n        return db.doc(id).delete();\r\n    }\r\n\r\n    getFromUser(uid) {\r\n        return this.getAll().where(\"uid\", \"==\", uid).get();\r\n    }\r\n}\r\n\r\nexport default new WalletsDataService();","import React, { Component } from 'react';\r\nimport WalletsDataService from '../../services/wallets.service';\r\nimport {\r\n    CCard,\r\n    CCardBody,\r\n    CCardHeader,\r\n    CDataTable,\r\n    CButton,\r\n} from '@coreui/react';\r\n\r\nimport CIcon from '@coreui/icons-react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { getUser } from '../../common';\r\n\r\nclass UserWallets extends Component\r\n{\r\n    constructor(props) {\r\n        super(props);\r\n        this.onDataChange = this.onDataChange.bind(this);\r\n        this.state = {\r\n            wallets: [],\r\n            user: getUser()\r\n        };\r\n\r\n        this.unsubscribe = undefined;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.unsubscribe = WalletsDataService.getAll()\r\n            .onSnapshot(this.onDataChange);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.unsubscribe();\r\n    }\r\n\r\n    onDataChange(items) {\r\n        let wallets = [];\r\n        items.forEach(item => {\r\n            let id = item.id;\r\n            let data = item.data();\r\n            \r\n            if (data.uid === this.state.user.uid)\r\n            {\r\n                wallets.push({\r\n                    id: id,\r\n                    uid: data.uid,\r\n                    username: data.username,\r\n                    total: data.total,\r\n                    payment: data.payment,\r\n                });\r\n            }\r\n        });\r\n\r\n        this.setState({\r\n            wallets: wallets,\r\n        });\r\n    }\r\n\r\n    render ()\r\n    {\r\n        const user = getUser();\r\n        if (!user)\r\n        {\r\n            return (<Redirect to=\"/login\" />);\r\n        }\r\n\r\n        return (\r\n            <CCard>\r\n                <CCardHeader>\r\n                    My Wallets\r\n                </CCardHeader>\r\n                <CCardBody>\r\n                    <CDataTable\r\n                        items={this.state.wallets}\r\n                        fields={[\r\n                            { key: 'total', _classes: 'font-weight-bold' },\r\n                            'payment', \r\n                        ]}\r\n                        hover\r\n                        striped\r\n                        clickableRows\r\n                        scopedSlots = {{\r\n                            'total':\r\n                                (item) => (\r\n                                    <td>${item.total}</td>\r\n                                ),\r\n                            }}\r\n                        />\r\n                </CCardBody>\r\n            </CCard>\r\n        )\r\n    }\r\n}\r\n\r\nexport default UserWallets;"],"sourceRoot":""}