(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[9],{631:function(e,t,c){"use strict";var n=c(157),a=c(158),r=c(630).c.collection("/wallets"),s=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,[{key:"getAll",value:function(){return r}},{key:"create",value:function(e){return r.add(e)}},{key:"update",value:function(e,t){return r.doc(e).update(t)}},{key:"delete",value:function(e){return r.doc(e).delete()}},{key:"getFromUser",value:function(e){return this.getAll().where("uid","==",e).get()}}]),e}();t.a=new s},634:function(e,t,c){"use strict";var n=c(157),a=c(158),r=c(630).c.collection("/products"),s=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,[{key:"getAll",value:function(){return r}},{key:"create",value:function(e){return r.add(e)}},{key:"update",value:function(e,t){return r.doc(e).update(t)}},{key:"delete",value:function(e){return r.doc(e).delete()}}]),e}();t.a=new s},635:function(e,t,c){"use strict";var n=c(157),a=c(158),r=c(630).c.collection("/orders"),s=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,[{key:"getAll",value:function(){return r}},{key:"create",value:function(e){return r.add(e)}},{key:"update",value:function(e,t){return r.doc(e).update(t)}},{key:"delete",value:function(e){return r.doc(e).delete()}}]),e}();t.a=new s},688:function(e,t,c){"use strict";c.r(t);var n=c(380),a=c(157),r=c(158),s=c(161),i=c(163),o=c(162),l=c(1),d=c(672),u=c(655),h=c.n(u),j=c(627),b=c(628),m=c(20),O=c(634),x=c(635),f=c(631),p=c(629),g=c(17),y=function(e){Object(i.a)(c,e);var t=Object(o.a)(c);function c(e){var r;return Object(a.a)(this,c),(r=t.call(this,e)).handleInputFocus=function(e){r.setState({focus:e.target.name})},r.handleInputChange=function(e){var t=e.target,c=t.name,a=t.value;r.setState(Object(n.a)({},c,a))},r.refreshList=r.refreshList.bind(Object(s.a)(r)),r.refreshCartCount=r.refreshCartCount.bind(Object(s.a)(r)),r.setActiveProduct=r.setActiveProduct.bind(Object(s.a)(r)),r.onDataChange=r.onDataChange.bind(Object(s.a)(r)),r.handleInputFocus=r.handleInputFocus.bind(Object(s.a)(r)),r.handleInputChange=r.handleInputChange.bind(Object(s.a)(r)),r.state={products:[],currentProduct:null,currentIndex:-1,cartcount:Object(p.c)(),carts:[],totalPrice:0,showCart:!1,showPayment:!1,cvc:"",expiry:"",focus:"",name:"",number:"",isPayPal:!1,isCreditCard:!1},r.unsubscribe=void 0,r}return Object(r.a)(c,[{key:"refreshCartCount",value:function(){this.setState({cartcount:Object(p.c)()})}},{key:"componentDidMount",value:function(){this.unsubscribe=O.a.getAll().orderBy("trending","desc").onSnapshot(this.onDataChange)}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var c=e.id,n=e.data();t.push({id:c,category:n.category,name:n.name,price:n.price,imgurl:n.imgurl,description:n.description,trending:n.trending})})),this.setState({products:t})}},{key:"refreshList",value:function(){this.setState({currentProduct:null,currentIndex:-1})}},{key:"setActiveProduct",value:function(e,t){this.setState({currentProduct:e,currentIndex:t})}},{key:"render",value:function(){var e=this,t=Object(p.g)();return t?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(j.x,{withSubheader:!0,children:Object(g.jsx)(j.y,{className:"px-3",children:Object(g.jsxs)(j.d,{onClick:function(){e.setState({showCart:!0,carts:Object(p.d)(),totalPrice:Object(p.f)()})},children:[Object(g.jsx)(b.a,{name:"cil-cart",size:"2xl"}),Object(g.jsx)(j.a,{shape:"pill",color:"info",children:this.state.cartcount})]})})}),Object(g.jsx)(j.G,{className:"background-main",children:Object(g.jsxs)("div",{className:"container-fluid text-center",children:[Object(g.jsx)("h1",{className:"display-x text-white hero-h1",children:"Bistrot Fran\xe7ais"}),Object(g.jsx)("p",{className:"text-white",children:"We are closed for the moment, but we will still deliver food at your place!"}),Object(g.jsx)(j.d,{className:"menu-background",size:"lg",children:"View Today's Menu"})]})}),this.state.products.map((function(t,c){return Object(g.jsx)(j.Q,{children:Object(g.jsx)(j.l,{xl:8,children:Object(g.jsxs)("div",{className:"item row align-items-center",children:[Object(g.jsx)("div",{className:"col-sm-2 pr-5",children:t.imgurl&&Object(g.jsx)("img",{className:"product-img",src:t.imgurl,alt:""})}),Object(g.jsxs)("div",{className:"details col-sm-10",children:[Object(g.jsxs)("div",{className:"item__header",children:[Object(g.jsxs)("h3",{className:"item__title",children:[t.name,"(",t.category,")"]}),!0===t.trending&&Object(g.jsx)(j.a,{color:"danger",children:"Trending"}),Object(g.jsx)("span",{className:"item__dots"}),Object(g.jsxs)("span",{className:"item__price",children:["$",t.price]})]}),Object(g.jsx)("p",{className:"item__description",children:t.description}),Object(g.jsx)(j.d,{className:"btn btn-sm btn-outline-primary my-cart-btn",onClick:function(c){Object(p.a)(t.id,t.name,t.price,t.imgurl),e.setState({cartcount:Object(p.c)()})},children:"Add to cart"})]})]})})},c)})),Object(g.jsxs)(j.J,{show:this.state.showCart,onClose:function(){return e.setState({showCart:!e.state.showCart})},color:"info",children:[Object(g.jsx)(j.M,{closeButton:!0,children:Object(g.jsx)(j.N,{children:"My Cart"})}),Object(g.jsxs)(j.K,{children:[Object(g.jsx)(j.o,{items:this.state.carts,fields:["imgurl",{key:"name",_classes:"font-weight-bold"},"price","count","total",""],hover:!0,striped:!0,clickableRows:!0,scopedSlots:{imgurl:function(e){return Object(g.jsx)("td",{children:""!==e.imgurl&&Object(g.jsx)("div",{className:"cart-img",children:Object(g.jsx)(j.z,{src:e.imgurl,className:"cart-img"})})})},price:function(e){return Object(g.jsxs)("td",{children:["$",e.price]})},total:function(e){return Object(g.jsxs)("td",{children:["$",e.total]})},"":function(t){return Object(g.jsx)("td",{children:Object(g.jsx)(j.d,{color:"danger",style:{padding:2},onClick:function(c){Object(p.i)(t.pid),console.log(t.pid),e.setState({showCart:!0,carts:Object(p.d)(),totalPrice:Object(p.f)(),cartcount:Object(p.c)()})},children:Object(g.jsx)("small",{children:"Remove"})})})}}}),Object(g.jsx)(j.Q,{children:Object(g.jsx)(j.l,{xl:12,children:Object(g.jsxs)("h5",{children:["Total Price: $",this.state.totalPrice]})})})]}),Object(g.jsxs)(j.L,{children:[Object(g.jsx)(j.d,{color:"secondary",onClick:function(){return e.setState({showCart:!1})},children:"Close"}),Object(p.c)()>0&&Object(g.jsx)(j.d,{color:"info",onClick:function(){e.setState({showCart:!1,showPayment:!0})},children:"Checkout"})]})]}),Object(g.jsxs)(j.J,{show:this.state.showPayment,size:"lg",onClose:function(){return e.setState({showPayment:!e.state.showPayment})},color:"info",children:[Object(g.jsx)(j.M,{closeButton:!0,children:Object(g.jsx)(j.N,{children:"Payment"})}),Object(g.jsx)(j.K,{children:Object(g.jsxs)(j.w,{style:{margin:10},children:[Object(g.jsx)(j.Q,{children:Object(g.jsxs)(j.w,{variant:"checkbox",style:{margin:10},children:[Object(g.jsx)(j.F,{className:"form-check-input",id:"creditcard",name:"payment",value:"creditcart",onChange:function(t){t.target.checked&&e.setState({isPayPal:!1,isCreditCard:!0})}}),Object(g.jsx)(j.H,{variant:"checkbox",htmlFor:"radio",children:"Credit Card"})]})}),Object(g.jsxs)(j.Q,{children:[Object(g.jsx)(j.l,{xs:"10",sm:"6",children:Object(g.jsx)(d.a,{cvc:this.state.cvc,expiry:this.state.expiry,focused:this.state.focus,name:this.state.name,number:this.state.number})}),Object(g.jsxs)(j.l,{xs:"10",sm:"6",children:[Object(g.jsx)(j.Q,{children:Object(g.jsx)(j.l,{xs:"12",children:Object(g.jsxs)(j.w,{children:[Object(g.jsx)(j.A,{id:"number",name:"number",placeholder:"Card Number",required:!0,onChange:this.handleInputChange,onFocus:this.handleInputFocus}),Object(g.jsx)(j.H,{color:"gray",children:"E.g.: 49..., 51..., 36..., 37..."})]})})}),Object(g.jsx)(j.Q,{children:Object(g.jsx)(j.l,{xs:"12",children:Object(g.jsx)(j.w,{children:Object(g.jsx)(j.A,{id:"name",name:"name",placeholder:"Name",required:!0,onChange:this.handleInputChange,onFocus:this.handleInputFocus})})})}),Object(g.jsxs)(j.Q,{children:[Object(g.jsx)(j.l,{xs:"7",children:Object(g.jsx)(j.w,{children:Object(g.jsx)(j.A,{id:"expiry",name:"expiry",placeholder:"Valid Thru",required:!0,onChange:this.handleInputChange,onFocus:this.handleInputFocus})})}),Object(g.jsx)(j.l,{xs:"5",children:Object(g.jsx)(j.w,{children:Object(g.jsx)(j.A,{id:"cvc",name:"cvc",placeholder:"CVC",required:!0,onChange:this.handleInputChange,onFocus:this.handleInputFocus})})})]})]})]}),Object(g.jsx)(j.Q,{children:Object(g.jsxs)(j.w,{variant:"checkbox",style:{margin:10},children:[Object(g.jsx)(j.F,{className:"form-check-input",id:"paypal",name:"payment",value:"paypal",onChange:function(t){t.target.checked&&e.setState({isPayPal:!0,isCreditCard:!1})}}),Object(g.jsx)(j.H,{variant:"checkbox",htmlFor:"radio",children:"PayPal"})]})})]})}),Object(g.jsxs)(j.L,{children:[Object(g.jsx)(j.d,{color:"secondary",onClick:function(){return e.setState({showPayment:!1})},children:"Close"}),this.state.isCreditCard&&!this.state.isPayPal&&Object(g.jsx)(j.d,{color:"info",onClick:function(){e.setState({showCart:!1,showPayment:!1}),x.a.create({uid:t.uid,username:t.displayName,date:h()().format("YYYY-MM-DD hh:mm:ss"),status:"pending",total:Object(p.f)(),order:Object(p.e)()});var c=Object(p.f)();f.a.getAll().where("uid","==",t.uid).get().then((function(e){e.forEach((function(e){console.log(e.id," => ",e.data());var t=e.data();t.total-=c,console.log(t),f.a.update(e.id,t)}))})).catch((function(e){console.log("Error getting documents: ",e)})),Object(p.h)(),e.refreshCartCount()},children:"Pay"}),!this.state.isCreditCard&&this.state.isPayPal&&Object(g.jsx)(j.I,{href:"https://www.paypal.com",rel:"noreferrer noopener",target:"_blank",className:"card-header-action",children:Object(g.jsx)(j.d,{color:"info",onClick:function(){e.setState({showCart:!1,showPayment:!1}),Object(p.h)(),e.setState({cartcount:Object(p.c)()})},children:"PayPal"})})]})]})]}):Object(g.jsx)(m.a,{to:"/login"})}}]),c}(l.Component);t.default=y}}]);
//# sourceMappingURL=9.46e29361.chunk.js.map